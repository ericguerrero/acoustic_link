<!-- TEST1: BAGFILE:send usbllong from USBL and create a sensors/modem_raw mesage in the AUV-->
<launch>
	<!-- BAGFILE -->
	<!--bagfile, to create the topics -->
  	<param name="use_sim_time" value="true" />
  	<arg name="bagfile" default="/home/eric/bagfiles/2016-03-18-13-27-33.bag"/>
  	<node pkg="rosbag" type="play" name="rosbag" args="-l --clock $(arg bagfile)"/>


    <!-- ACOUSTIC LINKS WITH REMAPING -->
	<!--acoustic_link USBL -->
	<node pkg="acoustic_link" name="usbl" type="acoustic_link_node" output="screen">
		<rosparam command="load" file="$(find acoustic_link)/conf/topics_usbl_test.yaml"/>
		<remap from="/im/in" to="/modem/im/out"/>
		<remap from="/im/out" to="/usbl/im/out"/>
	</node>
	<!--acoustic_link MODEM -->
	<node pkg="acoustic_link" name="modem" type="acoustic_link_node" output="screen">
		<rosparam command="load" file="$(find acoustic_link)/conf/topics_modem_test.yaml"/>
		<remap from="/im/in" to="/usbl/im/out"/>
		<remap from="/im/out" to="/modem/im/out"/>
	</node>

	<!-- USBLLONG TO SENSORS/MODEM_RAW -->
 	<node pkg="usbl_position" name="usbl_position" type="usbl_position_node" output="screen">
 		<remap from="/usbl/usbllong" to="/usbl/usbllong2"/>
 		<remap from="/usbl/usblangles" to="/usbl/usblangles2"/>
	</node>

</launch>