<launch>
 	<!--bagfile, to create the topics -->
  	<param name="use_sim_time" value="true" />
  	<arg name="bagfile" default="/home/eric/bagfiles/usblangles.bag"/>
  	<node pkg="rosbag" type="play" name="rosbag" args="-l --clock $(arg bagfile)"/>

	<!--acoustic_link USBL -->
	<node pkg="acoustic_link" name="usbl" type="acoustic_link_node" output="screen">
		<rosparam command="load" file="$(find acoustic_link)/conf/topics_usbl.yaml"/>
		<remap from="/im/in" to="/modem/im/out"/>
		<remap from="/im/out" to="/usbl/im/out"/>
	</node>

	<!--acoustic_link MODEM -->
	<node pkg="acoustic_link" name="modem" type="acoustic_link_node" output="screen">
		<rosparam command="load" file="$(find acoustic_link)/conf/topics_modem.yaml"/>
		<remap from="/im/in" to="/usbl/im/out"/>
		<remap from="/im/out" to="/modem/im/out"/>
	</node>

	<!-- Position -->
 	<node pkg="usbl_position" name="usbl_position" type="usbl_position" output="screen"/>
 	<!-- Plot -->
 	<node pkg="usbl_position" name="plot_position" type="plot_position_node"/>
 	 <!--rviz -->
  	<node pkg="rviz" type="rviz" name="rviz" args="-d $(find usbl_position)/config/plotting.rviz" />
</launch>